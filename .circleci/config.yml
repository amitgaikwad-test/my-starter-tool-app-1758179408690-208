version: 2.1
jobs:
  build:
    docker:
      - image: cimg/node:20.10
    steps:
      - checkout
      - run: npm install
      - run:
          name: SonarCloud Scan
          command: |
            npm install -g sonarqube-scanner
            sonar-scanner               -Dsonar.organization=$SONAR_ORG               -Dsonar.projectKey=$CIRCLE_PROJECT_REPONAME               -Dsonar.sources=./src               -Dsonar.host.url=https://sonarcloud.io               -Dsonar.login=$SONAR_TOKEN
workflows:
  build_and_test:
    jobs:
      - build